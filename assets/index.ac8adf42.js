var _=Object.defineProperty,q=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var j=(e,t,o)=>t in e?_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,y=(e,t)=>{for(var o in t||(t={}))U.call(t,o)&&j(e,o,t[o]);if($)for(var o of $(t))W.call(t,o)&&j(e,o,t[o]);return e},E=(e,t)=>q(e,G(t));import{a as Z,d as v,g as K}from"./with-install.932aa1ce.js";import{v as I,a as J,T as Q,r as z}from"./framework.ddfda0ac.js";import{E as k,P as R}from"./popup-manager.f37c59a2.js";import{u as X}from"./index.570843b3.js";import{E as Y,e as x,T as B}from"./icon.34c134ec.js";import{j as ee,e as te,c as m,o as oe,z as H,k as u,A as g,B as S,C as L,q as p,v as P,D as ne,E as C,G as D,x as A,t as se,l as F,I as ie,H as O,aa as w}from"./framework.506ba982.js";import{a as ae,i as le}from"./index.0686aea5.js";const V=["success","info","warning","error"],re=Z({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:v([String,Object]),default:""},id:{type:String,default:""},message:{type:v([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:v(Function),default:()=>{}},onClose:{type:v(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...V,""],default:""},zIndex:{type:Number,default:0}}),fe={destroy:()=>!0};var M=ee({name:"ElNotification",components:y({ElIcon:Y},x),props:re,emits:fe,setup(e){const t=te(!1);let o;const i=m(()=>{const d=e.type;return d&&B[e.type]?`el-notification--${d}`:""}),f=m(()=>B[e.type]||e.icon||""),l=m(()=>e.position.endsWith("right")?"right":"left"),s=m(()=>e.position.startsWith("top")?"top":"bottom"),c=m(()=>({[s.value]:`${e.offset}px`,zIndex:e.zIndex}));function n(){e.duration>0&&({stop:o}=ae(()=>{t.value&&a()},e.duration))}function r(){o==null||o()}function a(){t.value=!1}function b({code:d}){d===k.delete||d===k.backspace?r():d===k.esc?t.value&&a():n()}return oe(()=>{n(),t.value=!0}),X(document,"keydown",b),{horizontalClass:l,typeClass:i,iconComponent:f,positionStyle:c,visible:t,close:a,clearTimer:r,startTimer:n}}});const ce=["id"],de={class:"el-notification__group"},ue=["textContent"],me={key:0},pe=["innerHTML"];function ye(e,t,o,i,f,l){const s=H("el-icon"),c=H("close");return u(),g(Q,{name:"el-notification-fade",onBeforeLeave:e.onClose,onAfterLeave:t[3]||(t[3]=n=>e.$emit("destroy"))},{default:S(()=>[L(p("div",{id:e.id,class:P(["el-notification",e.customClass,e.horizontalClass]),style:A(e.positionStyle),role:"alert",onMouseenter:t[0]||(t[0]=(...n)=>e.clearTimer&&e.clearTimer(...n)),onMouseleave:t[1]||(t[1]=(...n)=>e.startTimer&&e.startTimer(...n)),onClick:t[2]||(t[2]=(...n)=>e.onClick&&e.onClick(...n))},[e.iconComponent?(u(),g(s,{key:0,class:P(["el-notification__icon",e.typeClass])},{default:S(()=>[(u(),g(ne(e.iconComponent)))]),_:1},8,["class"])):C("v-if",!0),p("div",de,[p("h2",{class:"el-notification__title",textContent:D(e.title)},null,8,ue),L(p("div",{class:"el-notification__content",style:A(e.title?void 0:{margin:0})},[se(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(u(),F(ie,{key:1},[C(" Caution here, message could've been compromized, nerver use user's input as message "),C(" eslint-disable-next-line "),p("p",{innerHTML:e.message},null,8,pe)],2112)):(u(),F("p",me,D(e.message),1))])],4),[[I,e.message]]),e.showClose?(u(),g(s,{key:0,class:"el-notification__closeBtn",onClick:J(e.close,["stop"])},{default:S(()=>[O(c)]),_:1},8,["onClick"])):C("v-if",!0)])],46,ce),[[I,e.visible]])]),_:3},8,["onBeforeLeave"])}M.render=ye;M.__file="packages/components/notification/src/notification.vue";const h={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},N=16;let ve=1;const T=function(e={}){if(!le)return{close:()=>{}};(typeof e=="string"||w(e))&&(e={message:e});const t=e.position||"top-right";let o=e.offset||0;h[t].forEach(({vm:r})=>{var a;o+=(((a=r.el)==null?void 0:a.offsetHeight)||0)+N}),o+=N;const i=`notification_${ve++}`,f=e.onClose,l=E(y({zIndex:R.nextZIndex(),offset:o},e),{id:i,onClose:()=>{ge(i,t,f)}});let s=document.body;e.appendTo instanceof HTMLElement?s=e.appendTo:typeof e.appendTo=="string"&&(s=document.querySelector(e.appendTo)),s instanceof HTMLElement||(s=document.body);const c=document.createElement("div"),n=O(M,l,w(l.message)?{default:()=>l.message}:null);return n.props.onDestroy=()=>{z(null,c)},z(n,c),h[t].push({vm:n}),s.appendChild(c.firstElementChild),{close:()=>{n.component.proxy.visible=!1}}};V.forEach(e=>{T[e]=(t={})=>((typeof t=="string"||w(t))&&(t={message:t}),T(E(y({},t),{type:e})))});function ge(e,t,o){const i=h[t],f=i.findIndex(({vm:r})=>{var a;return((a=r.component)==null?void 0:a.props.id)===e});if(f===-1)return;const{vm:l}=i[f];if(!l)return;o==null||o(l);const s=l.el.offsetHeight,c=t.split("-")[0];i.splice(f,1);const n=i.length;if(!(n<1))for(let r=f;r<n;r++){const{el:a,component:b}=i[r].vm,d=parseInt(a.style[c],10)-s-N;b.props.offset=d}}function Ce(){for(const e of Object.values(h))e.forEach(({vm:t})=>{t.component.proxy.visible=!1})}T.closeAll=Ce;const Ne=K(T,"$notify");export{Ne as E};
