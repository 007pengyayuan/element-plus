import{f as d,r as p,o as g}from"./dom.9353f44c.js";import{N as b}from"./index.7c7e5023.js";import{g as v}from"./framework.b3e0f3f4.js";import{i as c}from"./index.88a5b812.js";const E={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},I='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',k=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,P=e=>Array.from(e.querySelectorAll(I)).filter(t=>x(t)&&k(t)),x=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},O=function(e,t,...n){let o;t.includes("mouse")||t.includes("click")?o="MouseEvents":t.includes("key")?o="KeyboardEvent":o="HTMLEvents";const a=document.createEvent(o);return a.initEvent(t,...n),e.dispatchEvent(a),e},A=e=>!e.getAttribute("aria-owns"),L=(e,t,n)=>{const{parentNode:o}=e;if(!o)return null;const a=o.querySelectorAll(n),i=Array.prototype.indexOf.call(a,e);return a[i+t]||null},F=e=>{!e||(e.focus(),!A(e)&&e.click())},S=e=>{e.preventDefault(),e.stopPropagation()},y=()=>{s==null||s.doOnModalClick()};let m=!1;const h=function(){if(!c)return;let e=s.modalDom;return e?m=!0:(m=!1,e=document.createElement("div"),s.modalDom=e,g(e,"touchmove",S),g(e,"click",y)),e},u={},s={modalFade:!0,modalDom:void 0,globalInitialZIndex:2e3,zIndex:0,getInitialZIndex(){var e;return v()?(e=b("zIndex").value)!=null?e:this.globalInitialZIndex:this.globalInitialZIndex},getInstance(e){return u[e]},register(e,t){e&&t&&(u[e]=t)},deregister(e){e&&(u[e]=null,delete u[e])},nextZIndex(){return this.getInitialZIndex()+ ++this.zIndex},modalStack:[],doOnModalClick(){const e=s.modalStack[s.modalStack.length-1];if(!e)return;const t=s.getInstance(e.id);t&&t.closeOnClickModal.value&&t.close()},openModal(e,t,n,o,a){if(!c||!e||t===void 0)return;this.modalFade=a;const i=this.modalStack;for(let r=0,f=i.length;r<f;r++)if(i[r].id===e)return;const l=h();d(l,"v-modal"),this.modalFade&&!m&&d(l,"v-modal-enter"),o&&o.trim().split(/\s+/).forEach(f=>d(l,f)),setTimeout(()=>{p(l,"v-modal-enter")},200),n&&n.parentNode&&n.parentNode.nodeType!==11?n.parentNode.appendChild(l):document.body.appendChild(l),t&&(l.style.zIndex=String(t)),l.tabIndex=0,l.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:o})},closeModal(e){const t=this.modalStack,n=h();if(t.length>0){const o=t[t.length-1];if(o.id===e)o.modalClass&&o.modalClass.trim().split(/\s+/).forEach(i=>p(n,i)),t.pop(),t.length>0&&(n.style.zIndex=`${t[t.length-1].zIndex}`);else for(let a=t.length-1;a>=0;a--)if(t[a].id===e){t.splice(a,1);break}}t.length===0&&(this.modalFade&&d(n,"v-modal-leave"),setTimeout(()=>{t.length===0&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",s.modalDom=void 0),p(n,"v-modal-leave")},200))}},C=function(){if(!!c&&s.modalStack.length>0){const e=s.modalStack[s.modalStack.length-1];return e?s.getInstance(e.id):void 0}};c&&window.addEventListener("keydown",function(e){if(e.code===E.esc){const t=C();t&&t.closeOnPressEscape.value&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}});export{E,s as P,F as f,L as g,A as i,P as o,O as t};
